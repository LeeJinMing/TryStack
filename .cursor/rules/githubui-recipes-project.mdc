---
globs: **
alwaysApply: false
---

# GitHubUI Recipes Project Rules

## 通用协作规则（跨任务）

- 默认用中文沟通；代码/路径/字段名保持英文原样。
- 输出优先给结论与下一步；避免长篇理论；必要时用清单。
- 讨论/设计类问题：先给 3-7 条要点 + 取舍理由；再给推荐方案。
- 工程实现类问题：优先给可执行步骤与最小改动面；只展示最关键代码片段。
- 风险敏感：遇到安全、合规、许可证、供应链风险必须先提示风险与边界，再给方案。
- 不确定处不要装懂：给出假设，并说明如何验证。

## 本项目：开源应用本地一键入口（Recipes / Try locally）

你现在处于“开源应用本地一键启动入口”项目语境。目标是构建：开源 recipes 仓库 + 规范/CI + Portal + npx CLI（GitHub App 后置，插件最后）。

### 项目定位（必须保持一致）

- 主叙事：维护者工具，降低支持成本（标准化试用/部署配方，减少重复 issue）。
- 增长漏斗：为评估者提供 Try locally 入口，但不将自己包装成托管平台。
- 永远开源：recipe 规范、公共 recipe 库、验证标准与 CI 模板。
- 可能收费（后置）：私有 recipes、组织治理与合规、云端试用资源。

### MVP 固定约束（第一阶段不得突破）

- 本地一键：用户可接受 Docker（不做云端常驻托管）。
- 分发：npx（优先 Node/TS 实现 CLI）。
- 验证标准：最低必须做到“UI 可打开”（HTTP 200 + title/关键文本）；不要求登录/业务流程。
- 赛道优先：A0 项目优先（单容器/单 compose、无外部 key、5 分钟内可打开 UI）。
- 安全：不建议 curl|bash；任何自动补齐都必须可验证；不得无隔离执行不受信任代码。

### 分级/分诊（输出必须使用）

- A0：无外部 key、最少依赖、UI 可直接打开（首批重点）。
- A1：需要本地依赖（Postgres/Redis 等）但可默认配置一键起。
- A2：需要外部 key/OAuth，但允许“跳过配置先体验部分功能”，并提供清晰可选配置向导。
- A3：生产级配置（域名/回调/邮件等）；不承诺一键试用，仅做维护者部署标准化。
- C：纯库/CLI/组件库，不做应用入口。

### 核心资产（不要跑偏）

- 我们不分发上游项目本体，只分发“薄层 recipe”：
  - recipe.yaml（repo、版本范围、端口、健康检查、依赖、初始化、验证方法）
  - compose/override 或 devcontainer
  - env.sample（最少变量）
  - healthcheck/smoke test（自动验证 UI）
  - docs.md（1页纸）
  - patches/（必要时才用；默认不用）
- 目标是可复用、可验证、可治理，而不是“能跑一次”。

### 工作流（所有实现/讨论按此执行）

1) Triage（轻量）：仅基于仓库文件/README/compose/devcontainer 判断 A0/A1/A2/A3/C + 缺口清单。
2) Recipe PR：新增/更新 recipe 必须走 PR（不直接写 main）。
3) CI Verify：PR 必须在容器沙箱内验证通过（至少 UI 可打开）才允许合并。
4) 发布：合并后 Portal/CLI 能按 repo+tag 精确匹配 recipe。
5) 失败处理：失败输出可复现日志 + 归因 + 下一步动作，并沉淀为规则/文档。

### 形态优先级

1) 开源 recipes 仓库 + 规范/CI 模板
2) Portal（展示/搜索/生成命令/贡献入口；不负责跑本地）
3) npx CLI（拉取 repo/recipe → docker compose up → 打开 UI）
4) GitHub App（自动提 PR/checks/可选自动加 badge）
5) 浏览器插件（仅入口跳转 Portal）

### 输出风格（对外文案/对内文档）

- 首句永远让维护者安心：公共品、降支持成本、标准可审计。
- 用词：Try locally（强调本地），少用 demo/hosted。
